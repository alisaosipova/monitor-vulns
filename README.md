# monitor-vulns

## CS:GO Deal Monitor

Этот репозиторий содержит скрипт `deal_monitor.py` для мониторинга выгодных предложений на маркетах cs.money, lis-skins.com, market.csgo.com, steamcommunity.com/market и skinport.com с сопоставлением цен из Steam Community Market. Скрипт оценивает прибыль, ROI, скидку и потенциальный доход от перепродажи, обновляя данные каждые N секунд.

### Подготовка

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Скопируйте `config.example.yaml` в `config.yaml` и настройте параметры:
   - Добавьте API-ключ `market.csgo.com` (или задайте переменную окружения `CSGO_MARKET_API_KEY`).
   - При необходимости переопределите user-agent/headers. Сайты под Cloudflare могут автоматически получить токены (`auto_cookies: true` включен по умолчанию).
   - Определите предметы или категории (например, по качеству, типу оружия, наличию StatTrak) и задайте требования по цене/прибыли.

### Запуск

```bash
python deal_monitor.py -c config.yaml
```

Дополнительно можно задавать предметы через CLI:

```bash
python deal_monitor.py -c config.yaml --item "name=AK-47 | Redline (Field-Tested);min_price=40;min_roi=0.06"
```

Начиная с этой версии можно указывать только название предмета — параметры будут
подтянуты из настроек по умолчанию:

```bash
python deal_monitor.py -c config.yaml --item "AK-47 | Redline (Field-Tested)"
```

### Быстрый старт

Для Skinport и Steam подготовлен готовый пример `config.quickstart.yaml`. Его
можно использовать без изменения, чтобы сразу увидеть работу мониторинга:

```bash
python deal_monitor.py -c config.quickstart.yaml
```

### Возможности

- Опрос маркетов каждые `refresh_interval` секунд.
- Настраиваемые фильтры по цене, ROI, прибыли, скидке и списку маркетов (включая steamcommunity.com/market).
- Автоматический скоринг сделок по ROI, прибыли и скидке с возможностью настроить веса.
- Ограничение числа выводимых сделок, чтобы сосредоточиться на топовых предложениях.
- Отображение результатов в консоли с использованием библиотеки `rich`.
- Корректировка цен с учётом комиссий Steam.
- Автоподбор предложений по фильтрам (качество, тип оружия, StatTrak, ключевые слова) без перечисления каждого скина вручную.
- Автоматическое обновление Cloudflare-cookie с помощью `cloudscraper`, чтобы не вставлять их вручную.

> **Примечание:** динамический подбор по категориям сейчас поддерживается для маркетов с поиском по подстроке (`cs.money`, `lis-skins.com`). При необходимости ограничьте список маркетов через поле `markets` в конфигурации.

Подробнее о структуре конфигурации смотрите в `config.example.yaml`.
